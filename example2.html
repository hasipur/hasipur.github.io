<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>הסיפור - דף הנצחה</title>

  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand-main:#ff5757;
      --brand-soft:#ffdede;
      --text-main:#111;
      --text-soft:#777;
      --bg:#f4f4f4;
      --card:#ffffff;
      --stroke:#eeeeee;
      --shadow: 0 14px 40px rgba(0,0,0,.10);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:"Open Sans",system-ui,Arial;
      background: radial-gradient(circle at top, #ffe3e3, #f2f2f2);
      color:var(--text-main);
    }

    .wrap{
      width:100%;
      max-width: 920px;
      margin: 0 auto;
      padding: 14px 12px 50px;
      position:relative;
    }

    /* Top app header (simple) */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 4px 14px;
      position:relative;
    }
    .topbar .logo{
      font-weight:900;
      letter-spacing:2px;
      font-size:22px;
      order:3;
      text-align:right;
      white-space:nowrap;
    }
    .topbar .logo span{ color:var(--brand-main); }
    .topbar .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 12px;
      border-radius:999px;
      background:#ffffffb8;
      border:1px solid var(--brand-soft);
      color:var(--text-soft);
      font-size:13px;
      white-space:nowrap;
      order:1;
    }
    .topbar .spacer{
      flex:1;
      order:2;
    }

    /* Burger */
    .burgerBtn{
      position:absolute;
      right:0;
      top:4px;
      width:44px;
      height:44px;
      border-radius:12px;
      border:1px solid #e9e9e9;
      background:#fff;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
    }
    .burgerBtn:active{ transform: scale(.98); }
    .burgerLines{
      width:18px;
      height:12px;
      position:relative;
    }
    .burgerLines span{
      position:absolute;
      left:0;
      right:0;
      height:2px;
      background:#222;
      border-radius:999px;
      opacity:.9;
    }
    .burgerLines span:nth-child(1){ top:0; }
    .burgerLines span:nth-child(2){ top:5px; }
    .burgerLines span:nth-child(3){ top:10px; }

    /* Side menu */
    .menuOverlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.35);
      display:none;
      z-index:2000;
    }
    .menuOverlay.open{ display:block; }

    .sideMenu{
      position:fixed;
      top:0;
      right:0;
      height:100%;
      width:min(340px, 86vw);
      background:#fff;
      box-shadow: -20px 0 60px rgba(0,0,0,.25);
      transform: translateX(110%);
      transition: transform .22s ease;
      z-index:2100;
      display:flex;
      flex-direction:column;
    }
    .sideMenu.open{ transform: translateX(0); }

    .menuHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:16px 16px;
      border-bottom:1px solid #eee;
    }
    .menuHead .title{
      font-weight:900;
      font-size:16px;
    }
    .menuClose{
      border:none;
      background:transparent;
      cursor:pointer;
      font-size:22px;
      font-weight:900;
      opacity:.75;
    }
    .menuList{
      padding: 10px 8px 18px;
    }
    .menuItem{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:14px 14px;
      margin:8px 6px;
      border:1px solid #f0f0f0;
      border-radius:16px;
      text-decoration:none;
      color:#111;
      font-weight:800;
      box-shadow: 0 10px 18px rgba(0,0,0,.05);
    }
    .menuItem small{
      color:#777;
      font-weight:700;
    }

    /* Profile card */
    .card{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* Cover */
    .cover{
      position:relative;
      height: 270px;
      background:#ddd;
    }
    .cover img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .cover::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(to bottom, rgba(0,0,0,.18), rgba(0,0,0,0) 45%, rgba(0,0,0,.18));
      pointer-events:none;
    }

    /* Header section under cover */
    .profileHead{
      position:relative;
      padding: 16px 16px 12px;
      background: #fff;
    }

    .avatar{
      position:absolute;
      left:50%;
      right:auto;
      top:-52px;
      transform: translateX(-50%);
      width:104px;
      height:104px;
      border-radius:50%;
      overflow:hidden;
      border:4px solid #fff;
      box-shadow: 0 10px 26px rgba(0,0,0,.18);
      background:#eee;
    }

    .avatar img{
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .meta{
      padding-top: 62px;
      display:flex;
      flex-direction:column;
      gap:6px;
      text-align:center;
    }

    .meta .small{
      color:var(--text-soft);
      font-size:13px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .meta .name{
      font-size:26px;
      font-weight:800;
      margin:0;
      line-height:1.15;
    }
    .meta .dates{
      color:#222;
      font-size:15px;
      font-weight:600;
      opacity:.85;
    }
    .meta .quote{
      margin-top:8px;
      color:#333;
      font-size:14px;
      line-height:1.7;
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:center;
    }
    .meta .quote .qmark{
      font-size:22px;
      line-height:1;
      color:var(--brand-main);
      font-weight:900;
      margin-top:2px;
    }

    /* Actions row */
    .actions{
      margin-top: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius: 999px;
      padding: 11px 14px;
      font-weight:700;
      font-size:14px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      transition: transform .08s ease, opacity .2s ease;
      user-select:none;
    }
    .btn:active{ transform: scale(.98); }
    .btn.secondary{
      background:#fff;
      border:1px solid #dcdcdc;
      color:#111;
    }
    .btn.primary{
      background: var(--brand-main);
      color:#fff;
      border:1px solid rgba(0,0,0,0);
    }
    .btn .icon{
      width:18px;
      height:18px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:16px;
    }

    /* Tabs */
    .tabs{
      position:sticky;
      top:0;
      z-index:50;
      background:#fff;
      border-top:1px solid var(--stroke);
      border-bottom:1px solid var(--stroke);
      display:flex;
      gap:0;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    .tab{
      flex:1 0 auto;
      padding: 12px 14px;
      font-size:14px;
      color:#444;
      background:transparent;
      border:none;
      cursor:pointer;
      font-weight:700;
      opacity:.85;
      white-space:nowrap;
      position:relative;
    }
    .tab.active{
      opacity:1;
      color:#111;
    }
    .tab.active::after{
      content:"";
      position:absolute;
      right:14px;
      left:14px;
      bottom:0;
      height:3px;
      border-radius: 999px;
      background: var(--brand-main);
    }

    /* Content sections */
    .content{
      padding: 14px 16px 18px;
      background:#fff;
    }

    .section{
      display:none;
      animation: fade .18s ease;
    }
    .section.active{ display:block; }

    @keyframes fade{
      from{ opacity:.0; transform: translateY(4px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .h2{
      margin: 6px 0 10px;
      font-size:18px;
      font-weight:800;
    }

    .story{
      font-size:16px;
      line-height:1.95;
      color:#222;
    }
    .story p{ margin:0 0 12px; }

    /* Media grids */
    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    .media{
      border-radius:16px;
      overflow:hidden;
      border:1px solid #eee;
      box-shadow: 0 8px 18px rgba(0,0,0,.08);
      background:#fff;
      min-height: 150px;
      position:relative;
    }
    .media img, .media video{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    /* ===== Videos (חדש) ===== */
    .videoGrid{
      display:grid;
      grid-template-columns: repeat(2, 1fr); /* 50% + 50% */
      gap:12px;
    }

    .ytCard{
      border-radius:16px;
      overflow:hidden;
      border:1px solid #eee;
      box-shadow: 0 8px 18px rgba(0,0,0,.08);
      background:#000;
      position:relative;
      aspect-ratio: 9 / 16;
    }

    /* thumbnail (חד וברור) */
    .ytThumb{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform: translateZ(0);
    }

    .ytPlay{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(to bottom, rgba(0,0,0,.15), rgba(0,0,0,.10));
      cursor:pointer;
      user-select:none;
    }
    .ytPlay .btnPlay{
      width:64px;
      height:64px;
      border-radius:999px;
      background: rgba(255,255,255,.92);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 14px 34px rgba(0,0,0,.35);
      font-size:22px;
      font-weight:900;
      color:#111;
    }
    .ytPlay .btnPlay::before{
      content:"▶";
      margin-left:3px;
    }

    .ytIframe{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      border:0;
      display:none;
    }
    .ytCard.playing .ytThumb,
    .ytCard.playing .ytPlay{ display:none; }
    .ytCard.playing .ytIframe{ display:block; }

    /* Memories list */
    .memoriesTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom: 8px;
    }
    .note{
      color:var(--text-soft);
      font-size:12.5px;
      line-height:1.5;
    }
    .memList{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 12px;
    }
    .memItem{
      border:1px solid #eee;
      border-radius: 16px;
      padding: 12px 12px;
      background:#fff;
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
    }
    .memItem .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-bottom: 6px;
      color:#333;
      font-weight:800;
      font-size:14px;
    }
    .memItem .date{
      font-weight:700;
      color:#999;
      font-size:12px;
      white-space:nowrap;
    }
    .memItem .text{
      color:#222;
      font-size:14px;
      line-height:1.75;
      white-space:pre-wrap;
    }

    /* Audio & Songs */
    .audioList{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 8px;
    }
    .audioItem{
      border:1px solid #eee;
      border-radius:16px;
      padding: 12px;
      background:#fff;
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
    }
    .audioItem .title{
      font-weight:900;
      margin-bottom: 8px;
    }
    audio{ width:100%; }

    /* Modal */
    .modalBg{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index:1000;
    }
    .modalBg.open{ display:flex; }

    .modal{
      width:100%;
      max-width: 520px;
      background:#fff;
      border-radius: 22px;
      box-shadow: 0 20px 60px rgba(0,0,0,.25);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.4);
    }
    .modalHead{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom:1px solid #eee;
    }
    .modalHead .title{
      font-weight:900;
      font-size:16px;
    }
    .xbtn{
      border:none;
      background:transparent;
      cursor:pointer;
      font-size:18px;
      font-weight:900;
      opacity:.75;
    }
    .modalBody{
      padding: 14px 16px 16px;
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-bottom: 12px;
    }
    label{
      font-size:12.5px;
      color:#444;
      font-weight:800;
    }
    input, textarea{
      font-family: inherit;
      border:1px solid #e3e3e3;
      border-radius: 14px;
      padding: 11px 12px;
      font-size:14px;
      outline:none;
    }
    textarea{
      min-height: 120px;
      resize: vertical;
      line-height:1.6;
    }
    .modalFoot{
      padding: 0 16px 16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    /* Responsive */
    @media (max-width: 720px){
      .cover{ height: 230px; }
      .grid{ grid-template-columns: repeat(2, 1fr); }
      .meta .name{ font-size:24px; }
    }
    @media (max-width: 520px){
      .videoGrid{ grid-template-columns: repeat(2, 1fr); } /* עדיין 2 בשורה */
    }
    @media (max-width: 360px){
      .videoGrid{ grid-template-columns: 1fr; } /* ממש קטן -> שורה אחת */
    }
    @media (max-width: 420px){
      .grid{ grid-template-columns: 1fr; }
      .avatar{ width:96px; height:96px; top:-48px; }
      .meta{ padding-top: 58px; }
      .tabs{ gap:0; }
    }
  </style>
</head>

<body>
  <!-- Side Menu -->
  <div class="menuOverlay" id="menuOverlay" aria-hidden="true"></div>
  <aside class="sideMenu" id="sideMenu" aria-label="תפריט">
    <div class="menuHead">
      <div class="title">תפריט</div>
      <button class="menuClose" id="menuClose" type="button" aria-label="סגירה">✕</button>
    </div>
    <div class="menuList">
      <!-- שים כאן לינקים אמיתיים -->
      <a class="menuItem" href="#" id="menuBuy">
        <span>לרכישת ברקוד</span>
        <small>›</small>
      </a>
      <a class="menuItem" href="#" id="menuContact">
        <span>צרו קשר</span>
        <small>›</small>
      </a>
    </div>
  </aside>

  <div class="wrap">
    <div class="topbar">
      <button class="burgerBtn" id="burgerBtn" type="button" aria-label="פתח תפריט">
        <div class="burgerLines" aria-hidden="true">
          <span></span><span></span><span></span>
        </div>
      </button>

      <div class="pill">🕯️ דף זיכרון אישי</div>
      <div class="spacer"></div>
      <div class="logo">ה<span>ס</span>יפור</div>
    </div>

    <div class="card" id="card">

      <!-- Cover -->
      <div class="cover">
        <img src="img1.jpg.jpeg" alt="באנר משפחתי">
      </div>

      <!-- Profile head -->
      <div class="profileHead">
        <div class="avatar">
          <img src="img4.jpg.png" alt="תמונת פרופיל">
        </div>

        <div class="meta">
          <div class="small">לזכר</div>
          <h1 class="name">סבא אליאס ז״ל</h1>
          <div class="dates">06.08.1946 - 22.07.2022</div>

          <div class="quote">
            <div class="qmark">״</div>
            <div>החיים יפים, אל תשכחו את זה</div>
          </div>

          <div class="actions">
            <button class="btn secondary" id="btnShare" type="button">
              <span class="icon">⤴️</span>
              שיתוף
            </button>

            <button class="btn secondary" id="btnAddMemory" type="button">
              <span class="icon">✍️</span>
              הוספת זיכרון
            </button>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs" id="tabs">
        <button class="tab active" data-target="life">סיפור חיים</button>
        <button class="tab" data-target="photos">תמונות</button>
        <button class="tab" data-target="videos">סרטונים</button>
        <button class="tab" data-target="memories">זיכרונות</button>
        <button class="tab" data-target="recordings">הקלטות</button>
        <button class="tab" data-target="songs">שירים</button>
      </div>

      <!-- Content -->
      <div class="content">
        <!-- Life -->
        <section class="section active" id="life">
          <div class="h2">סיפור החיים</div>
          <div class="story">
            <p>סבא שלי, שנולד בשנת 1935 בעיר בגדד, היה אדם יוצא דופן – אדם עם לב רחב, נשמה גדולה ואהבה אינסופית למדינת ישראל ולעמו. הוא נולד למשפחה חמה ומלוכדת, עם שישה אחים, וגדל בבית פשוט אך מלא באהבה, שמחה ומוזיקה עיראקית.</p>
            <p>כבר בילדותו התגלה בו חוש אחריות נדיר – בגיל 11 בלבד יצא לעבוד כחייט. בעזרת העבודה הוא למד את מקצועו, והצליח לפרנס את משפחתו.</p>
            <p>מלבד עבודתו, סבא אהב לשחק שש-בש – והוא היה פשוט תותח בזה! שעות על גבי שעות היה יושב עם חברים, מחייך את החיוך הרחב שלו ומנצח אחד אחרי השני. הצבע האהוב עליו היה צהוב – צבע של אור, שמחה ואופטימיות, ממש כמו האישיות שלו.</p>
            <p>בשנת 1951, כשהיה בן 16, עלה לארץ ישראל יחד עם משפחתו. עם הגיעם, שיכנו אותם באוהלים בעלייה – שם חיו בתנאים קשים, ללא חשמל, כשהם מדליקים פנס שעובד על נפט כדי להאיר את הלילות הארוכים.</p>
            <p>משם נדדו מפרדס חנה לכפר סבא, וגם שם חיו באוהלים, עד שבסופו של דבר הגיעו לשכונת התקווה בתל אביב – המקום שבו סוף סוף מצאו בית אמיתי.</p>
            <p>במהלך השנים סבא למד נהיגה, והחל לעבוד כנהג מונית – מקצוע שאהב מאוד, ושאפשר לו לפגוש אנשים, לשוחח, ולחלוק את חוכמת החיים שלו עם כל נוסע.</p>
            <p>לאחר שעלָה לארץ, סבא גם פגש והתאהב באישה מדהימה – סבתא שלי – שגם היא עלתה מעיראק. יחד הם הקימו בית חם ומלא אור, גידלו ילדים לתפארת, והניחו יסודות למשפחה גדולה, גאה וישראלית.</p>
            <p>סבא השתתף בכל מלחמות ישראל, ובכל פעם שנדרש – עמד בגאווה לצד חבריו לנשק, מתוך תחושת שליחות עמוקה ואמונה בצדקת הדרך. הוא היה פטריוט אמיתי – כזה שלא רק דיבר על אהבת הארץ, אלא חי אותה, נשם אותה, ונתן לה את כל כולו.</p>
            <p>מי שזכה להכיר את סבא, ידע שמדובר באדם נדיר: איש של ערכים, של יושר, של עבודה קשה, ושל אהבה עצומה למשפחתו. הוא תמיד היה שם בשביל כולם – עם חיוך, עצה טובה, ולב רחב שלא ידע גבולות.</p>
            <p>סבא שלי נפטר בתאריך כ"ד בתשרי תשפ"א, ונקבר בבית העלמין ירקון שבתל אביב. גם היום, כשהוא כבר לא איתנו בגוף, הרוח שלו מלווה אותנו בכל יום מחדש – ברגעים הקטנים, בצחוק של הנכדים, בשירים של יום העצמאות, ובאהבה האינסופית לארץ הזאת שהוא כה אהב.</p>
            <p><strong>יהי זכרו ברוך ❤️</strong></p>
          </div>
        </section>

        <!-- Photos -->
        <section class="section" id="photos">
          <div class="h2">תמונות</div>
          <div class="grid">
            <div class="media"><img src="img1.jpg.jpeg" alt="תמונה 1"></div>
            <div class="media"><img src="img3.jpg.jpeg" alt="תמונה 2"></div>
          </div>
        </section>

        <!-- Videos (רק יוטיוב + קטן + חד) -->
        <section class="section" id="videos">
          <div class="h2">סרטונים</div>

          <div class="videoGrid">
            <!-- וידאו 1 -->
            <div class="ytCard" data-yt="HCodwcl2VjA" aria-label="סרטון מיוטיוב">
              <img class="ytThumb"
                   src="https://i.ytimg.com/vi/HCodwcl2VjA/maxresdefault.jpg"
                   alt="תצוגה מקדימה">
              <div class="ytPlay" role="button" aria-label="נגן סרטון">
                <div class="btnPlay"></div>
              </div>
              <iframe class="ytIframe"
                title="YouTube video player"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
            </div>

            <!-- וידאו 2 (דוגמה) - אם אין לך עוד, תמחק את כל הבלוק הזה -->
            <div class="ytCard" data-yt="HCodwcl2VjA" aria-label="סרטון מיוטיוב">
              <img class="ytThumb"
                   src="https://i.ytimg.com/vi/HCodwcl2VjA/maxresdefault.jpg"
                   alt="תצוגה מקדימה">
              <div class="ytPlay" role="button" aria-label="נגן סרטון">
                <div class="btnPlay"></div>
              </div>
              <iframe class="ytIframe"
                title="YouTube video player"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
            </div>
          </div>
        </section>

        <!-- Memories -->
        <section class="section" id="memories">
          <div class="memoriesTop">
            <div>
              <div class="h2" style="margin:6px 0 4px;">זיכרונות</div>
              <div class="note">
                אפשר להוסיף זיכרון בקלות דרך הכפתור.<br>
                חשוב: יש בחירה בין לשמור את הזיכרון רק במכשיר של מי שכתב או לשלוח אלינו לוואצאפ - ונוסיף את זה באופן ציבורי לכולם.<br>
                <strong>שימו לב:</strong> אחרי שנקבל את ההודעה בוואצאפ, נוודא מול בעל העמוד (הלקוח שרכש) שהוא מאשר את הבקשה — ורק אז נוסיף. אם לא יאשר, לא יתווסף.
              </div>
            </div>

            <button class="btn primary" type="button" id="btnAddMemory2">
              <span class="icon">＋</span>
              הוספת זיכרון
            </button>
          </div>

          <div class="memList" id="memList">
            <div class="note" style="margin-top:10px;">זיכרונות שנשמרו לכולם:</div>

            <div class="memItem">
              <div class="top">
                <div>משפחת כהן</div>
                <div class="date">24/12/2025</div>
              </div>
              <div class="text">תמיד נזכור את החיוך שלך ואת הלב הענק. תודה על כל רגע. ❤️</div>
            </div>
          </div>
        </section>

        <!-- Recordings -->
        <section class="section" id="recordings">
          <div class="h2">הקלטות</div>

          <div class="note" style="margin-top:-4px;">
            כדי להוסיף הקלטה:<br>
            <strong>שימו לב:</strong> אחרי שנקבל את ההודעה בוואצאפ, נוודא מול בעל העמוד (הלקוח שרכש) שהוא מאשר את הבקשה — ורק אז נוסיף. אם לא יאשר, לא יתווסף.
          </div>

          <button class="btn secondary" type="button" id="sendWhatsappRecordings" style="margin-top:10px;">
            <span class="icon">💬</span>
            שליחה לוואטסאפ
          </button>

          <div class="audioList">
            <div class="audioItem">
              <div class="title">הקלטה 1</div>
              <audio controls src="audio1.mp3"></audio>
            </div>
          </div>
        </section>

        <!-- Songs -->
        <section class="section" id="songs">
          <div class="h2">שירים</div>

          <div class="note" style="margin-top:-4px;">
            כדי להוסיף שיר:<br>
            <strong>שימו לב:</strong> אחרי שנקבל את ההודעה בוואצאפ, נוודא מול בעל העמוד (הלקוח שרכש) שהוא מאשר את הבקשה — ורק אז נוסיף. אם לא יאשר, לא יתווסף.
          </div>

          <button class="btn secondary" type="button" id="sendWhatsappSongs" style="margin-top:10px;">
            <span class="icon">💬</span>
            שליחה לוואטסאפ
          </button>

          <div class="audioList">
            <div class="audioItem">
              <div class="title">שיר אהוב</div>
              <audio controls src="song1.mp3"></audio>
            </div>
          </div>
        </section>

      </div><!-- /content -->
    </div><!-- /card -->
  </div><!-- /wrap -->

  <!-- Modal: Add Memory -->
  <div class="modalBg" id="modalBg" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="הוספת זיכרון">
      <div class="modalHead">
        <div class="title">הוספת זיכרון</div>
        <button class="xbtn" id="modalClose" type="button">✕</button>
      </div>

      <div class="modalBody">
        <div class="field">
          <label for="memName">שם (לא חובה)</label>
          <input id="memName" type="text" placeholder="לדוגמה: משפחת לוי">
        </div>

        <div class="field">
          <label for="memText">הזיכרון שלך</label>
          <textarea id="memText" placeholder="כתבו כמה מילים מהלב..."></textarea>
        </div>

        <div class="note" style="margin-top:-4px;">
          ✳️ הכפתור "שמירה כאן" - יבצע שמירה לזיכרון רק במכשיר הזה | הכפתור "שליחה לוואטסאפ" - ישלח לנו את הזיכרון ונוסיף אותו באופן ציבורי לכולם.<br>
          <strong>שימו לב:</strong> אחרי קבלת ההודעה בוואצאפ אנחנו נוודא מול בעל העמוד (הלקוח שרכש) שהוא מאשר את הבקשה — ורק אז נוסיף. אם לא יאשר, לא יתווסף.
        </div>
      </div>

      <div class="modalFoot">
        <button class="btn primary" type="button" id="saveLocal">שמירה כאן</button>
        <button class="btn secondary" type="button" id="sendWhatsapp">שליחה לוואטסאפ</button>
        <button class="btn secondary" type="button" id="cancelModal">ביטול</button>
      </div>
    </div>
  </div>

  <script>
    // ===== Tabs =====
    const tabs = document.querySelectorAll(".tab");
    const sections = document.querySelectorAll(".section");

    function activateTab(targetId){
      tabs.forEach(t => t.classList.toggle("active", t.dataset.target === targetId));
      sections.forEach(s => s.classList.toggle("active", s.id === targetId));
    }

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        activateTab(tab.dataset.target);
        document.getElementById("tabs").scrollIntoView({behavior:"smooth", block:"start"});
      });
    });

    // ===== Side Menu =====
    const burgerBtn = document.getElementById("burgerBtn");
    const menuOverlay = document.getElementById("menuOverlay");
    const sideMenu = document.getElementById("sideMenu");
    const menuClose = document.getElementById("menuClose");

    function openMenu(){
      menuOverlay.classList.add("open");
      sideMenu.classList.add("open");
      menuOverlay.setAttribute("aria-hidden","false");
    }
    function closeMenu(){
      menuOverlay.classList.remove("open");
      sideMenu.classList.remove("open");
      menuOverlay.setAttribute("aria-hidden","true");
    }

    burgerBtn.addEventListener("click", openMenu);
    menuClose.addEventListener("click", closeMenu);
    menuOverlay.addEventListener("click", closeMenu);
    document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeMenu(); });

    // ===== Share =====
    const btnShare = document.getElementById("btnShare");
    btnShare.addEventListener("click", async () => {
      const url = window.location.href;

      if (navigator.share) {
        try{
          await navigator.share({ title: document.title, text: "דף זיכרון", url });
          return;
        } catch(e){}
      }

      try{
        await navigator.clipboard.writeText(url);
        alert("הקישור הועתק ללוח!");
      } catch(e){
        prompt("העתיקו את הקישור:", url);
      }
    });

    // ===== Modal =====
    const modalBg = document.getElementById("modalBg");
    const openers = [document.getElementById("btnAddMemory"), document.getElementById("btnAddMemory2")];
    const modalClose = document.getElementById("modalClose");
    const cancelModal = document.getElementById("cancelModal");
    const memName = document.getElementById("memName");
    const memText = document.getElementById("memText");

    function openModal(){
      modalBg.classList.add("open");
      modalBg.setAttribute("aria-hidden", "false");
      memText.focus();
    }
    function closeModal(){
      modalBg.classList.remove("open");
      modalBg.setAttribute("aria-hidden", "true");
    }

    openers.forEach(btn => btn.addEventListener("click", () => {
      activateTab("memories");
      document.getElementById("tabs").scrollIntoView({behavior:"smooth", block:"start"});
      setTimeout(openModal, 220);
    }));

    modalClose.addEventListener("click", closeModal);
    cancelModal.addEventListener("click", closeModal);
    modalBg.addEventListener("click", (e) => { if(e.target === modalBg) closeModal(); });
    document.addEventListener("keydown", (e) => { if(e.key === "Escape") closeModal(); });

    // ===== Memories (LocalStorage) =====
    const memList = document.getElementById("memList");
    const saveLocal = document.getElementById("saveLocal");

    function formatDate(d){
      const dd = String(d.getDate()).padStart(2,'0');
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const yyyy = d.getFullYear();
      return `${dd}/${mm}/${yyyy}`;
    }

    function renderMemoryItem(item){
      const box = document.createElement("div");
      box.className = "memItem";
      box.innerHTML = `
        <div class="top">
          <div>${escapeHtml(item.name || "אורח/ת")}</div>
          <div class="date">${escapeHtml(item.date)}</div>
        </div>
        <div class="text">${escapeHtml(item.text)}</div>
      `;
      return box;
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    const STORAGE_KEY = "hasipur_memories_v1";

    function loadMemories(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return [];
        const arr = JSON.parse(raw);
        if(!Array.isArray(arr)) return [];
        return arr;
      }catch(e){
        return [];
      }
    }

    function saveMemories(arr){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    }

    function paintSavedMemories(){
      const arr = loadMemories();
      if(!arr.length) return;

      const sep = document.createElement("div");
      sep.className = "note";
      sep.style.marginTop = "10px";
      sep.textContent = "זיכרונות שנשמרו במכשיר הזה:";
      memList.appendChild(sep);

      arr.forEach(item => {
        memList.appendChild(renderMemoryItem(item));
      });
    }

    paintSavedMemories();

    saveLocal.addEventListener("click", () => {
      const name = (memName.value || "").trim();
      const text = (memText.value || "").trim();

      if(text.length < 2){
        alert("רשמו לפחות כמה מילים 🙂");
        return;
      }

      const item = { name, text, date: formatDate(new Date()) };
      const arr = loadMemories();
      arr.unshift(item);
      saveMemories(arr);

      memList.appendChild(renderMemoryItem(item));

      memName.value = "";
      memText.value = "";
      closeModal();

      alert("נשמר! (במכשיר הזה). אם תרצו שזה יופיע לכולם — שלחו אליכם לוואטסאפ.");
    });

    // ===== WhatsApp send (Memories) =====
    const sendWhatsapp = document.getElementById("sendWhatsapp");
    sendWhatsapp.addEventListener("click", () => {
      const name = (memName.value || "").trim();
      const text = (memText.value || "").trim();

      if(text.length < 2){
        alert("רשמו קודם את הזיכרון 🙂");
        return;
      }

      const PHONE = "972584869014"; // <-- לשנות כאן

      const msg =
        `שלום, אני רוצה להוסיף זיכרון לדף ההנצחה:\n` +
        `שם: ${name || "ללא"}\n` +
        `זיכרון: ${text}\n\n` +
        `חשוב: לאחר קבלת ההודעה, תאשרו זאת מול בעל העמוד (הלקוח שרכש). אם יאשר - תוסיפו. אם לא - לא.\n` +
        `קישור לדף: ${window.location.href}`;

      const url = `https://wa.me/${PHONE}?text=${encodeURIComponent(msg)}`;
      window.open(url, "_blank");
    });

    // ===== WhatsApp send (Recordings & Songs) =====
    const PHONE = "972584869014"; // <-- אותו מספר (לשנות כאן אם צריך)

    const sendWhatsappRecordings = document.getElementById("sendWhatsappRecordings");
    sendWhatsappRecordings.addEventListener("click", () => {
      const msg =
        `שלום, אני רוצה להוסיף הקלטה לדף ההנצחה.\n` +
        `אנא כתבו לי כאן את שם ההקלטה + צרפו את הקובץ (MP3) או קישור.\n\n` +
        `חשוב: לאחר קבלת ההודעה, תאשרו זאת מול בעל העמוד (הלקוח שרכש). אם יאשר - תוסיפו. אם לא - לא.\n` +
        `קישור לדף: ${window.location.href}`;
      const url = `https://wa.me/${PHONE}?text=${encodeURIComponent(msg)}`;
      window.open(url, "_blank");
    });

    const sendWhatsappSongs = document.getElementById("sendWhatsappSongs");
    sendWhatsappSongs.addEventListener("click", () => {
      const msg =
        `שלום, אני רוצה להוסיף שיר לדף ההנצחה.\n` +
        `אנא כתבו לי כאן את שם השיר + קישור (יוטיוב/ספוטיפיי) או קובץ (MP3).\n\n` +
        `חשוב: לאחר קבלת ההודעה, תאשרו זאת מול בעל העמוד (הלקוח שרכש). אם יאשר - תוסיפו. אם לא - לא.\n` +
        `קישור לדף: ${window.location.href}`;
      const url = `https://wa.me/${PHONE}?text=${encodeURIComponent(msg)}`;
      window.open(url, "_blank");
    });

    // ===== YouTube: thumbnail חד + נגן רק בלחיצה =====
    const ytCards = document.querySelectorAll(".ytCard");
    ytCards.forEach(card => {
      const id = card.getAttribute("data-yt");
      const thumb = card.querySelector(".ytThumb");
      const iframe = card.querySelector(".ytIframe");
      const play = card.querySelector(".ytPlay");

      // fallback אם maxres לא קיים
      thumb.addEventListener("error", () => {
        thumb.src = `https://i.ytimg.com/vi/${id}/hqdefault.jpg`;
      }, { once:true });

      function start(){
        if(card.classList.contains("playing")) return;
        card.classList.add("playing");
        iframe.src = `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&playsinline=1`;
      }

      play.addEventListener("click", start);
      thumb.addEventListener("click", start);
    });
  </script>
</body>
</html>
